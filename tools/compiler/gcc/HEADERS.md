# Header Files

[Header files](https://gcc.gnu.org/onlinedocs/gcc-12.2.0/cpp/Header-Files.html) serve two purposes.

- *System header files* declare the interfaces to parts of the operating system. You include them in your program to supply the definitions and declarations you need to invoke system calls and libraries.
- Your own header files contain declarations for interfaces between the source files of your program.

## System Header Files

The header files declaring interfaces to the operating system and runtime libraries often cannot be written in strictly conforming C. Therefore, GCC gives code found in *system headers special treatment*.

- All warnings, other than those generated by `#warning` are suppressed while GCC is processing a system header.
- Macros defined in a system header are immune to a few warnings wherever they are expanded. This immunity is granted on an ad-hoc basis, when we find that a warning generates lots of false positives because of code in macros defined in system headers.

> A false positive is where you receive a positive result for a test, when you should have received a negative results. It’s sometimes called a “false alarm” or “false positive error.” It’s usually used in the medical field, but it can also apply to other arenas (like software testing). [False Positive and False Negative by Statistics How To](https://www.statisticshowto.com/false-positive-definition-and-examples/)

Normally, only the headers found in specific directories are considered system headers. These directories are determined when GCC is compiled.

Header files found in directories added to the search path with the `-isystem` and `-idirafter` command-line options are treated as system headers for the purposes of diagnostics.

## Include Syntax

Both user and system header files are included using the preprocessing directive `#include`. It has two variants:

`#include <file>`

- This variant is used for system header files.
- It searches for a file named file in a standard list of system directories.
- You can prepend directories to this list with the `-I` option.

`#include "file"`

- This variant is used for header files of your own program.
- It searches for a file named file first in the directory containing the current file, then in the quote directories and then the same directories used for `file`.
- You can prepend directories to the list of quote directories with the `-iquote` option.

## Search Path

By default, the preprocessor looks for header files included by the *quote form* of the directive `#include "file"`

- first relative to the directory of the current file, and then
- in a preconfigured list of standard system directories.

For the *angle-bracket form* `#include <file>`, the preprocessor’s default behavior is to look only in the standard system directories.

The most commonly-used option is `-Idir`, which causes `dir` to be searched

- after the current directory (for the quote form of the directive) and
- ahead of the standard system directories.

If you need separate control over the search paths for the quote and angle-bracket forms of the `#include` directive, you can use the `-iquote` and/or `-isystem` options instead of `-I`.

## `g++` options for directory search

Reference: [`g++(1)` Options for Directory Search](https://www.man7.org/linux/man-pages/man1/g++.1.html)

These options add the directory dir to the list of directories to be searched for header files during preprocessing.

- `-iquote` *dir*
  - applies to search for the quote form `#include "file"`
- `-I` *dir*
- `-isystem` *dir*
- `-idirafter` *dir*
  - apply to both `#include "file"` and `#include <file>`

If *dir* begins with `=` or `$SYSROOT`, then the `=` or `$SYSROOT` is replaced by the `sysroot` prefix:

- `--sysroot=dir`: Use *dir* as the logical root directory for headers and libraries. For example, if the compiler normally searches for headers in `/usr/include` and libraries in `/usr/lib`, it instead searches `dir/usr/include` and `dir/usr/lib`.
- `-isysroot dir`: This option is like the `--sysroot` option, but applies only to header files. If you use both this option and the `--sysroot` option, then the `--sysroot` option applies to libraries, but the `-isysroot` option applies to header files.

The lookup order for the quote form `#include "file"`:
1. the directory of the current file
2. the directories specified by `-iquote` options
3. Directories specified with `-I` options
4. Directories specified with `-isystem` options
5. Standard system directories
6. Directories specified with `-idirafter` options

The lookup order for the bracket form `#include <file>`:
1. Directories specified with `-I` options
2. Directories specified with `-isystem` options
3. Standard system directories
4. Directories specified with `-idirafter` options

The `-isystem` and `-idirafter` options also mark the directory as a system directory, so that it gets the same special treatment that is applied to the standard system directories.

If a standard system include directory, or a directory specified with `-isystem`, is also specified with `-I`, the `-I` option is ignored.

## Header File Directories

The exact search directory list depends on the target system, how GCC is configured, and where it is installed.

```
$ lsb_release -a
No LSB modules are available.
Distributor ID: Debian
Description:    Debian GNU/Linux 11 (bullseye)
Release:        11
Codename:       bullseye

$ which cpp
/usr/bin/cpp

$ cpp --version
cpp (Debian 10.2.1-6) 10.2.1 20210110
```

You can find the default search directory list for your version of C preprocessor (CPP) by invoking `cpp -v /dev/null -o /dev/null`:

```
ignoring nonexistent directory
    "/usr/local/include/aarch64-linux-gnu"
    "/usr/lib/gcc/aarch64-linux-gnu/10/include-fixed"
    "/usr/aarch64-linux-gnu/include"
#include "..." search starts here:
#include <...> search starts here:
    /usr/lib/gcc/aarch64-linux-gnu/10/include
    /usr/local/include
    /usr/include/aarch64-linux-gnu
    /usr/include
```

Exploring the subdirectories:

```
$ find -L /usr/lib/gcc/aarch64-linux-gnu/10/include -type d
/usr/lib/gcc/aarch64-linux-gnu/10/include
/usr/lib/gcc/aarch64-linux-gnu/10/include/sanitizer

$ find -L /usr/local/include -type d
/usr/local/include

$ find -L /usr/include/aarch64-linux-gnu -maxdepth 1 -type d
/usr/include/aarch64-linux-gnu
/usr/include/aarch64-linux-gnu/c++      <<< C++ >>>
/usr/include/aarch64-linux-gnu/sys
/usr/include/aarch64-linux-gnu/asm
/usr/include/aarch64-linux-gnu/python3.9
/usr/include/aarch64-linux-gnu/bits
/usr/include/aarch64-linux-gnu/gnu

$ find -L /usr/include/aarch64-linux-gnu/c++ -maxdepth 2 -type d
/usr/include/aarch64-linux-gnu/c++
/usr/include/aarch64-linux-gnu/c++/10
/usr/include/aarch64-linux-gnu/c++/10/ext
/usr/include/aarch64-linux-gnu/c++/10/bits

$ find -L /usr/include -maxdepth 1 -type d
/usr/include
/usr/include/IMUDrivers
/usr/include/netatalk
/usr/include/aarch64-linux-gnu
/usr/include/asm-generic
/usr/include/sound
/usr/include/xen
/usr/include/rdma
/usr/include/geany
/usr/include/linux
/usr/include/tirpc
/usr/include/netash
/usr/include/rpc
/usr/include/netinet
/usr/include/finclude
/usr/include/netrose
/usr/include/net
/usr/include/scsi
/usr/include/c++                        <<< C++ >>>
/usr/include/interface
/usr/include/netiucv
/usr/include/arpa
/usr/include/python3.9m
/usr/include/vcinclude
/usr/include/protocols
/usr/include/netipx
/usr/include/libpng16
/usr/include/mtd
/usr/include/iproute2
/usr/include/python3.9
/usr/include/netpacket
/usr/include/lxappearance
/usr/include/video
/usr/include/netax25
/usr/include/misc
/usr/include/rpcsvc
/usr/include/X11
/usr/include/libpng
/usr/include/netrom
/usr/include/nfs
/usr/include/freetype2
/usr/include/reglib
/usr/include/gdb
/usr/include/neteconet
/usr/include/brotli

$ find -L /usr/include/c++ -maxdepth 2 -type d
/usr/include/c++
/usr/include/c++/10
/usr/include/c++/10/ext
/usr/include/c++/10/decimal
/usr/include/c++/10/tr2
/usr/include/c++/10/experimental
/usr/include/c++/10/debug
/usr/include/c++/10/tr1
/usr/include/c++/10/bits
/usr/include/c++/10/pstl
/usr/include/c++/10/backward
/usr/include/c++/10/parallel
```

## Header Files from GCC 10.2.1

Header files for the local C compiler:

```
$ ls /usr/local/include
```

The C++ Standard Library headers are placed in `/usr/include/c++`:

```
$ ls /usr/include/c++
<10>

$ ls /usr/include/c++/10
algorithm           ctgmath           ostream
any                 ctime             <parallel>
array               cuchar            <pstl>
atomic              cwchar            queue
<backward>          cwctype           random
bit                 cxxabi.h          ranges
<bits>              <debug>           ratio
bitset              <decimal>         regex
cassert             deque             scoped_allocator
ccomplex            exception         set
cctype              execution         shared_mutex
cerrno              <experimental>    span
cfenv               <ext>             sstream
cfloat              fenv.h            stack
charconv            filesystem        stdexcept
chrono              forward_list      stdlib.h
cinttypes           fstream           stop_token
ciso646             functional        streambuf
climits             future            string
clocale             initializer_list  string_view
cmath               iomanip           system_error
codecvt             ios               tgmath.h
compare             iosfwd            thread
complex             iostream          <tr1>
complex.h           istream           <tr2>
concepts            iterator          tuple
condition_variable  limits            typeindex
coroutine           list              typeinfo
csetjmp             locale            type_traits
csignal             map               unordered_map
cstdalign           math.h            unordered_set
cstdarg             memory            utility
cstdbool            memory_resource   valarray
cstddef             mutex             variant
cstdint             new               vector
cstdio              numbers           version
cstdlib             numeric
cstring             optional

$ ls /usr/include/c++/10/experimental
algorithm     functional       numeric          string_view
any           internet         optional         system_error
array         io_context       propagate_const  timer
<bits>        iterator         random           tuple
buffer        list             ratio            type_traits
chrono        map              regex            unordered_map
deque         memory           set              unordered_set
executor      memory_resource  socket           utility
filesystem    net              source_location  vector
forward_list  netfwd           string
```

Header files for C compiler:

```
$ ls /usr/include
<aarch64-linux-gnu>  libpng               RTFusionRTQF.h
aio.h                <libpng16>           RTIMUAccelCal.h
aliases.h            limits.h             RTIMUCalDefs.h
alloca.h             link.h               RTIMUHal.h
argp.h               <linux>              RTIMULibDefs.h
argz.h               locale.h             RTIMULib.h
ar.h                 <lxappearance>       RTIMUMagCal.h
<arpa>               malloc.h             RTIMUSettings.h
<asm-generic>        math.h               RTMath.h
assert.h             mcheck.h             sched.h
bcm_host.h           memory.h             <scsi>
<brotli>             <misc>               search.h
byteswap.h           mntent.h             semaphore.h
<c++>                monetary.h           setjmp.h
cifsidmap.h          mqueue.h             sgtty.h
complex.h            <mtd>                shadow.h
cpio.h               <net>                signal.h
crypt.h              <netash>             <sound>
ctype.h              <netatalk>           spawn.h
dirent.h             <netax25>            stab.h
dlfcn.h              netdb.h              stdc-predef.h
elf.h                <neteconet>          stdint.h
endian.h             <netinet>            stdio_ext.h
envz.h               <netipx>             stdio.h
err.h                <netiucv>            stdlib.h
errno.h              <netpacket>          string.h
error.h              <netrom>             strings.h
execinfo.h           <netrose>            sudo_plugin.h
expat_external.h     <nfs>                syscall.h
expat.h              nl_types.h           sysexits.h
fcntl.h              nss.h                syslog.h
features.h           obstack.h            tar.h
fenv.h               paths.h              termio.h
<finclude>           pcmanfm-modules.h    termios.h
fmtmsg.h             pigpiod_if2.h        tgmath.h
fnmatch.h            pigpiod_if.h         thread_db.h
<freetype2>          pigpio.h             threads.h
fstab.h              pngconf.h            time.h
fts.h                png.h                <tirpc>
ftw.h                pnglibconf.h         ttyent.h
gconv.h              poll.h               uchar.h
<gdb>                printf.h             ucontext.h
<geany>              proc_service.h       ulimit.h
getopt.h             <protocols>          unistd.h
glob.h               pthread.h            utime.h
gnumake.h            pty.h                utmp.h
gnu-versions.h       pwd.h                utmpx.h
grp.h                <python3.9>          values.h
gshadow.h            <python3.9m>         <vcinclude>
iconv.h              <rdma>               <video>
ifaddrs.h            re_comp.h            wait.h
<IMUDrivers>         regex.h              wchar.h
<interface>          regexp.h             wctype.h
inttypes.h           <reglib>             wordexp.h
<iproute2>           resolv.h             <X11>
langinfo.h           <rpc>                <xen>
lastlog.h            <rpcsvc>             zconf.h
libgen.h             RTFusion.h           zlib.h
libintl.h            RTFusionKalman4.h
```

System header files specific to both *Target* (ARM) and the compiler version (10):

```
$ ls /usr/lib/gcc/aarch64-linux-gnu/10/include
acc_prof.h   backtrace-supported.h  <sanitizer>  stdint-gcc.h
arm_acle.h   float.h                stdalign.h   stdint.h
arm_bf16.h   gcov.h                 stdarg.h     stdnoreturn.h
arm_fp16.h   iso646.h               stdatomic.h  syslimits.h
arm_neon.h   limits.h               stdbool.h    unwind.h
arm_sve.h    omp.h                  stddef.h     varargs.h
backtrace.h  openacc.h              stdfix.h

$ ls /usr/include/aarch64-linux-gnu
a.out.h  <bits>  expat_config.h  <gnu>      <python3.9>
<asm>    <c++>   fpu_control.h   ieee754.h  <sys>

$ ls /usr/include/aarch64-linux-gnu/c++
<10>

$ ls /usr/include/aarch64-linux-gnu/c++/10
<bits>  <ext>

$ ls /usr/include/aarch64-linux-gnu/c++/10/bits
atomic_word.h   ctype_inline.h     messages_members.h
basic_file.h    cxxabi_tweaks.h    opt_random.h
c++allocator.h  error_constants.h  os_defines.h
c++config.h     extc++.h           stdc++.h
c++io.h         gthr-default.h     stdtr1c++.h
c++locale.h     gthr.h             time_members.h
cpu_defines.h   gthr-posix.h
ctype_base.h    gthr-single.h

$ ls /usr/include/aarch64-linux-gnu/c++/10/ext
opt_random.h
```
