# Get started with CMake Tools for VS Code

The CMake Tools extension integrates Visual Studio Code and CMake to make it easy to configure, build, and debug your C++ project. In [this tutorial](https://code.visualstudio.com/docs/cpp/CMake-linux), you'll use the CMake Tools extension for Visual Studio Code to configure, build, and debug a simple C++ CMake project

## Prerequisites

To complete this tutorial, install the following:

- a compiler, such as Clang and GCC
- a debugger, such as `lldb` and `gdb`
- a build tool, such as Ninja and Make
- CMake
- VS Code
- C++ extensions for VS Code
- CMake Tools extensions for VS Code

```bash
% cmake --version
cmake version 3.27.7

% clang++ --version
Apple clang version 15.0.0 (clang-1500.0.40.1)
Target: x86_64-apple-darwin22.6.0

% lldb --version
lldb-1500.0.22.8
Apple Swift version 5.9 (swiftlang-5.9.0.128.108 clang-1500.0.40.1)
```

## Create a CMake project

The CMake Tools extension can create the files for a basic CMake project for you. Open the Command Palette (⇧⌘P) and run the `CMake: Quick Start` command:

- Select a kit: `clang`
- Enter project name: `hello`

Then you will get a `CMakeLists.txt`:

```
cmake_minimum_required(VERSION 3.27.0)
project(hello VERSION 0.1.0 LANGUAGES C CXX)

include(CTest)
enable_testing()

add_executable(hello main.cpp)

set(CPACK_PROJECT_NAME ${PROJECT_NAME})
set(CPACK_PROJECT_VERSION ${PROJECT_VERSION})
include(CPack)
```

> The minimum version of CMake in `CMakeLists.txt` generated by `Quick Start` is `3.0.0`, which shows a warning message regarding compatibility. Specify the latest version such as 3.27.0.

Running `CMake: Configure` from the Command Palette with the kit and a variant `Debug`, VS Code executes `cmake` with the following options:

```
/usr/local/bin/cmake
  --no-warn-unused-cli
  -DCMAKE_BUILD_TYPE:STRING=Debug
  -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE
  -DCMAKE_C_COMPILER:FILEPATH=/usr/bin/clang
  -DCMAKE_CXX_COMPILER:FILEPATH=/usr/bin/clang++
  -S${workspaceFolder}
  -B${workspaceFolder}/build
  -G "Unix Makefiles"
```

Equivalent `settings.json` looks like this:

```
{
  "cmake.configureSettings":{
    "CMAKE_BUILD_TYPE:STRING":"Debug",
    "CMAKE_EXPORT_COMPILE_COMMANDS:BOOL":"TRUE",
    "CMAKE_C_COMPILER:FILEPATH":"/usr/bin/clang",
    "CMAKE_CXX_COMPILER:FILEPATH":"/usr/bin/clang++"
  },
  "cmake.sourceDirectory":"${workspaceFolder}",
  "cmake.buildDirectory":"${workspaceFolder}/build",
  "cmake.generator":"Unix Makefiles"
}
```

## Build the project

After configuring your project, you're ready to build. Open the Command Palette (⇧⌘P) and run the `CMake: Build` command, or select the `Build` button from the Status bar. VS Code execute `cmake` with the following options:

```
/usr/local/bin/cmake
  --build ${workspaceFolder}/build
  --config Debug
  --target all
  -j 10 --
```

By default, CMake Tools builds all targets. The selected target will appear in the Status bar next to the `Build` button, e.g. `[all]`. You can select which targets you'd like to build by selecting `CMake: Set Build Target` from the Command Palette.

## Debug the project

To run and debug your project, open `main.cpp` and put a breakpoint somewhere in the C++ source code. Then open the Command Palette (⇧⌘P) and run `CMake: Debug`. The debugger will stop on the breakpoint.
